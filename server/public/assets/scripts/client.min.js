/*! prompted 2016-05-14 */
var app=angular.module("promptedApp",["ngRoute","summernote","ngSanitize"]);app.config(["$routeProvider","$locationProvider","$sanitizeProvider",function(a,b,c){a.when("/home",{templateUrl:"views/choose.html"}).when("/write",{templateUrl:"views/write.html",controller:"WriteController",controllerAs:"write"}).when("/library",{templateUrl:"views/library.html",controller:"LibraryController",controllerAs:"library"}).when("/view",{templateUrl:"views/view.html",controller:"ViewController",controllerAs:"view"}).when("/edit",{templateUrl:"views/edit.html",controller:"EditController",controllerAs:"edit"}),b.html5Mode(!0)}]),app.controller("MainController",["UserTrackService","$scope","$http",function(a,b,c){a.getUserData(),b.user=a.user,console.log("$scope.user",b.user),b.capitalize=function(a){return a=a.toLowerCase(),a.substring(0,1).toUpperCase()+a.substring(1)}}]),app.controller("WriteController",["$scope","$http",function(a,b){a.prompt={},a.getPrompt=function(){b.get("http://www.ineedaprompt.com/dictionary/default/prompt?q=noun+verb+noun").then(function(b){console.log(b),a.prompt.title=b.data.english,console.log("$scope.prompt:",a.prompt)})},a.addWritingEntry=function(){console.log("addWritingEntry will add this entry:",a.prompt),b.post("/store",a.prompt).then(function(a){console.log("added this entry to db:",a)})}}]),app.controller("ViewController",["GetSingleViewService","DeleteSelectedWriting","$scope","$sce","$http",function(a,b,c,d,e){var f=this;f.data=a.view,console.log("vm.data.info:",f.data.info),f.getInfo=f.data.info,console.log("vm.getInfo:",f.getInfo),f.justObject=f.getInfo[0],console.log("vm.justObject:",f.justObject),f.justContent=f.justObject.entryContent,console.log("vm.justContent:",f.justContent),f.snippet=f.justContent,f.deliberatelyTrustDangerousSnippet=function(){return d.trustAsHtml(f.snippet)},f.deleteSelection=function(a){console.log("view controller:",a),b.deleteOne(a)}}]),app.controller("LibraryController",["GetSingleViewService","$scope","$http",function(a,b,c){var d=this;d.writingList=[],d.data=a.view,d.sendSingleView=function(b){console.log("Controller",b),a.singleView(b)};var e=function(){c.get("/library/allFromUser").then(function(a){console.log("Server response from getAllWritings",a),b.writingList=a.data})},f=function(){e()};f()}]),app.controller("EditController",["GetSingleViewService","DeleteSelectedWriting","$scope","$sce","$http",function(a,b,c,d,e){var f=this;f.data=a.view,console.log("vm.data.info:",f.data.info),f.getInfo=f.data.info,console.log("vm.getInfo:",f.getInfo),f.justObject=f.getInfo[0],console.log("vm.justObject:",f.justObject),f.justContent=f.justObject.entryContent,console.log("vm.justContent:",f.justContent),f.snippet=f.justContent,f.deliberatelyTrustDangerousSnippet=function(){return d.trustAsHtml(f.snippet)}}]),angular.module("promptedApp").factory("UserTrackService",["$http",function(a){var b={},c=function(){a.get("/auth").then(function(a){console.log(a),b.info=a.data,console.log("Logged in user is:",b.info.username)})};return{user:b,getUserData:c}}]),angular.module("promptedApp").factory("GetSingleViewService",["$http","$location",function(a,b){var c={},d=function(d){console.log("Button has been clicked, writing object grabbed:",d),a.get("/library/singleView/"+d._id).then(function(a){console.log("Server response from singleView",a),c.info=a.data,b.path("/view"),console.log(c)})};return{view:c,singleView:d}}]),angular.module("promptedApp").factory("DeleteSelectedWriting",["$http","$location","$window",function(a,b,c){var d={},e=function(e){var f=c.confirm("Are you sure you want to delete selection?");return 1!=f?!1:(console.log("Button has been clicked, writing object grabbed",e),void a["delete"]("/library/deleteOne/"+e._id).then(function(a){console.log("Delete call response:",a),d.info=a.data,console.log("single object:",d),b.path("/library")}))};return{single:d,deleteOne:e}}]);